(function(){"use strict";var e={1584:function(e,t,o){var n=o(5102),l=o(9269);const r={class:"supported-devices"},s={class:"filters"},i={key:"no-results"};function a(e,t,o,a,c,u){const d=(0,l.up)("filters"),v=(0,l.up)("device"),p=(0,l.up)("infinite-scroll");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",s,[(0,l.Wm)(d,{modelValue:a.currentFilters,"onUpdate:modelValue":t[0]||(t[0]=e=>a.currentFilters=e)},null,8,["modelValue"])]),(0,l.Wm)(p,{onLoad:a.loadItemsByScroll},{default:(0,l.w5)((()=>[(0,l.Wm)(n.W3,{class:"devices-list",tag:"div",name:"device"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.devicesToShow,(e=>((0,l.wg)(),(0,l.j4)(v,{key:e.vendor+e.model,device:e,onClick:a.storePosition},null,8,["device","onClick"])))),128)),0===a.devicesToShow.length?((0,l.wg)(),(0,l.iD)("p",i,"No devices found.")):(0,l.kq)("",!0)])),_:1})])),_:1},8,["onLoad"])])}var c=o(3201);const u={class:"device"},d=["href"],v={class:"thumb"},p={class:"top-right"},f={class:"vendor"},m=(0,l.Uk)("White-Label Device"),h={key:0,class:"is-new"},w=(0,l.Uk)("new"),b=["href"],y={class:"desc"},g={class:"model"};function P(e,t,o,n,r,s){const i=(0,l.up)("q-tooltip"),a=(0,l.up)("q-icon");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("a",{class:"title",href:n.baseUri+o.device.link},(0,c.zw)(o.device.description),9,d),(0,l._)("div",v,[(0,l._)("div",p,[(0,l._)("div",null,[(0,l._)("div",f,[(0,l.Uk)((0,c.zw)(o.device.vendor),1),o.device.isWhiteLabel?((0,l.wg)(),(0,l.j4)(a,{key:0,name:"more"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{self:"center end"},{default:(0,l.w5)((()=>[m])),_:1})])),_:1})):(0,l.kq)("",!0)])])]),n.isNew?((0,l.wg)(),(0,l.iD)("div",h,[w,(0,l.Wm)(i,{self:"center start"},{default:(0,l.w5)((()=>[(0,l.Uk)("Added at "+(0,c.zw)(new Date(o.device.addedAt).toLocaleString()),1)])),_:1})])):(0,l.kq)("",!0),(0,l._)("a",{class:"device-img",href:n.baseUri+o.device.link,style:(0,c.j5)({backgroundImage:"url("+n.baseUri+o.device.image+")"})},null,12,b)]),(0,l._)("div",y,[(0,l._)("div",g,(0,c.zw)(o.device.model),1),(0,l.Uk)("- "+(0,c.zw)(o.device.exposes.join(", ")),1)])])}var _=o(6237),k={name:"Device",props:["device"],setup(e){let t="./";const o=(0,_.iH)(!1);return(0,l.YP)(e.device,(e=>{o.value=new Date(e.addedAt)>Date.now()-2592e6}),{immediate:!0}),{isNew:o,baseUri:t}}},I=o(7617),U=o(4633),x=o(4806),S=o(1410),F=o.n(S);const H=(0,I.Z)(k,[["render",P]]);var V=H;F()(k,"components",{QIcon:U.Z,QTooltip:x.Z});const Z={class:"device-filters"},E={class:"vendor-filter"},O={class:"exposes-filter"},T={class:"search-filter"},q=(0,l.Uk)("RegEx support. E.g you can use"),D=(0,l._)("code",null," (wall|switch)",-1),j=(0,l.Uk)(" to search for wall OR switch.");function W(e,t,o,n,r,s){const i=(0,l.up)("multi-select"),a=(0,l.up)("q-icon"),c=(0,l.up)("q-tooltip"),u=(0,l.up)("q-input");return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",E,[(0,l.Wm)(i,{label:"Vendor",options:e.vendors,modelValue:e.vendorFilter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.vendorFilter=t)},null,8,["options","modelValue"])]),(0,l._)("div",O,[(0,l.Wm)(i,{label:"Exposes",options:e.exposes,modelValue:e.exposesFilter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.exposesFilter=t)},null,8,["options","modelValue"])]),(0,l._)("div",T,[(0,l.Wm)(u,{modelValue:e.searchFilter,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchFilter=t),filled:"",debounce:500,type:"search",placeholder:e.searchPlaceholder,label:e.searchFilter||"type to search"===e.searchPlaceholder?"Search":"Press / to search",onFocus:t[3]||(t[3]=t=>e.searchPlaceholder="type to search"),onBlur:t[4]||(t[4]=t=>e.searchPlaceholder="Press / to search"),clearable:""},{append:(0,l.w5)((()=>[(0,l.Wm)(a,{name:"info"}),(0,l.Wm)(c,{offset:[0,15],self:"bottom middle"},{default:(0,l.w5)((()=>[q,D,j])),_:1})])),_:1},8,["modelValue","placeholder","label"])])])}const C=(0,l.Uk)("No results");function Y(e,t,o,n,r,s){const i=(0,l.up)("q-item-section"),a=(0,l.up)("q-item"),c=(0,l.up)("q-select");return(0,l.wg)(),(0,l.j4)(c,{label:e.label,filled:"",clearable:"","use-chips":"","use-input":"","input-debounce":"0",options:e.filteredOptions,onFilter:e.filterFn,multiple:"","options-dense":"",onPopupHide:t[0]||(t[0]=t=>e.clearSearch(this)),ref:"el","onUpdate:modelValue":e.hidePopup},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{class:"text-grey"},{default:(0,l.w5)((()=>[C])),_:1})])),_:1})])),_:1},8,["label","options","onFilter","onUpdate:modelValue"])}var L=(0,l.aZ)({name:"multi-select",props:["label","options"],inheritAttrs:!0,setup(e,{emit:t,attrs:o}){const n=(0,_.iH)(null),r=(0,_.iH)(e.options);((0,_.dq)(e.options)||(0,_.PG)(e.options))&&(0,l.YP)(e.options,(e=>{t("update:modelValue",o.modelValue.value.filter((t=>e.includes(t))))}));const s=()=>{n.value.hidePopup()};return{el:n,hidePopup:s,clearSearch(e){setTimeout((()=>{e.$el.querySelector("input").value=""}),10)},filteredOptions:r,filterFn(t,o){o((()=>{const o=t.toLowerCase();r.value=e.options.filter((e=>e.toLowerCase().includes(o)))}))}}}}),Q=o(6257),A=o(5730),R=o(2278);const N=(0,I.Z)(L,[["render",Y]]);var z=N;F()(L,"components",{QSelect:Q.Z,QItem:A.Z,QItemSection:R.Z});const K=window.ZIGBEE2MQTT_SUPPORTED_DEVICES,B=new Set,$=new Set;K.forEach((({exposes:e,vendor:t})=>{$.add(t),e.forEach((e=>B.add(e)))}));const M=(e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"}),G=K,J=Array.from($).sort(M),X=Array.from(B).sort(M),ee=e=>e.sort(((e,t)=>{const o=M(e.vendor,t.vendor);return 0===o?M(e.model,t.model):o}));var te={arrayKeys:[],parseHash(){const e=location.hash.substr(1).split("&").map((e=>e.split("="))).map((([e,t])=>this.arrayKeys.includes(e)?[e,t.split(",").map((e=>decodeURIComponent(e)))]:[e,decodeURIComponent(t)])).filter((([e,t])=>e.length>0&&t.length>0));return Object.fromEntries(e)},updateHash(e){const t=this.parseHash();Object.entries(e).forEach((([e,o])=>{t[e]=o}));let o="#";Object.entries(t).forEach((([e,t])=>{if(void 0!==t&&null!==t&&""!==t)if(this.arrayKeys.includes(e)){const n=t.map((e=>encodeURIComponent(e))).join(",");o+=`${e}=${n}&`}else o+=`${e}=${encodeURIComponent(t)}&`})),location.hash=o.substr(0,o.length-1)}};te.arrayKeys.push("v"),te.arrayKeys.push("e");var oe=(0,l.aZ)({name:"filters",components:{MultiSelect:z},setup(e,{emit:t}){const o=te.parseHash(),n=(0,_.iH)(o.e||null),r=(0,_.iH)(o.v||null),s=(0,_.iH)(o.s||null),i=e=>()=>{Array.isArray(e.value)&&0===e.value.length&&(e.value=null)},a=()=>{te.updateHash({e:n.value,v:r.value,s:s.value}),n.value||r.value||s.value?t("update:modelValue",{exposes:n.value,vendors:r.value,search:s.value}):t("update:modelValue",null)};a(),(0,l.YP)(n,i(n)),(0,l.YP)(r,i(r)),(0,l.YP)(n,a),(0,l.YP)(r,a),(0,l.YP)(s,a);const c=e=>{"/"===e.key&&"INPUT"!==e.target.tagName&&(e.preventDefault(),document.querySelector(".search-filter input").focus())};return(0,l.bv)((()=>{document.body.addEventListener("keypress",c)})),(0,l.Jd)((()=>{document.removeEventListener("keypress",c)})),{searchPlaceholder:(0,_.iH)("Press / to search"),exposes:X,vendors:J,exposesFilter:n,vendorFilter:r,searchFilter:s}}}),ne=o(6874);const le=(0,I.Z)(oe,[["render",W]]);var re=le;function se(e,t=300){let o,n=!1;return(...l)=>{o?n=!0:(e.apply(this,l),o=setTimeout((()=>{o=void 0,n&&e.apply(this,l),n=!1}),t))}}F()(oe,"components",{QInput:ne.Z,QIcon:U.Z,QTooltip:x.Z});var ie={name:"InfiniteScroll",props:{debounce:{default:350,type:Number},offset:{default:500,type:Number}},emits:["load"],setup(e,{slots:t,emit:o}){const n=(0,_.iH)(null),r=se((()=>{n.value&&n.value.getBoundingClientRect().bottom-window.innerHeight<e.offset&&o("load")}),e.debounce);return(0,l.bv)((()=>{window.addEventListener("scroll",r)})),(0,l.Ah)((()=>{window.removeEventListener("scroll",r)})),()=>(0,l.h)("div",{class:"q-infinite-scroll",ref:n},t.default())}},ae=o(2672);const ce=ie;var ue=ce;function de(e,t){(0,l.YP)(e,(()=>{if(!e.value)return void(t.value=G);const{exposes:o,vendors:n,search:l}=e.value;let r=!1;if(l)try{r=new RegExp(l,"i")}catch(i){}const s=G.filter((e=>!(o&&!o.every((t=>e.exposes.includes(t))))&&(!(n&&!n.includes(e.vendor))&&!(r&&!["model","vendor","description"].some((t=>r.test(e[t])))))));t.value=ee(s)}),{immediate:!0})}F()(ie,"components",{QInfiniteScroll:ae.Z});var ve=o(5857),pe={name:"SupportedDevices",components:{InfiniteScroll:ue,Filters:re,Device:V},setup(){const e=(0,_.iH)(null),t=(0,_.iH)(ve.Z.getItem("loadIndex")||1),o=(0,_.iH)([]),n=(0,_.iH)([]);(0,l.YP)(o,(()=>{n.value=o.value.slice(0,20),t.value=1})),(0,l.YP)(t,(e=>{n.value=o.value.slice(0,20*e)})),de(e,o);const r=()=>{20*t.value>=o.value.length||t.value++},s=()=>{ve.Z.set("zigbee2mqtt-devices-overview",{loadIndex:t.value,scrollTop:window.scrollY})};return(0,l.bv)((()=>{const e=ve.Z.getItem("zigbee2mqtt-devices-overview")||{};e.loadIndex&&(t.value=e.loadIndex),e.scrollTop&&setTimeout((()=>{window.scrollTo(null,e.scrollTop)}))})),{currentFilters:e,devicesToShow:n,loadItemsByScroll:r,storePosition:s}}};const fe=(0,I.Z)(pe,[["render",a]]);var me=fe,he=o(2227);const we={config:{},plugins:{}};(0,n.ri)(me).use(he.Z,we).mount("#supported-devices-app")}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,r){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],l=e[u][1],r=e[u][2];for(var i=!0,a=0;a<n.length;a++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[a])}))?n.splice(a--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var c=l();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,l,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,r,s=n[0],i=n[1],a=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(a)var u=a(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[s[c]]=0;return o.O(u)},n=self["webpackChunkdevices_overview"]=self["webpackChunkdevices_overview"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(1584)}));n=o.O(n)})();
//# sourceMappingURL=app.js.map